<!DOCTYPE html>
  <html><head>  <meta charset="UTF-8"> <title>students</title>
  </head>

  <body style='margin-left: 30px;'>
     <h1>CIT7 Students</h1>
     <p>CIT7 students: &nbsp;Exam 1 Scores</p>

     <input type="button" id='btnCIT' value="Get CIT Student Scores">
     <input type="button" id='btnBUS' value="Get BUS Student Scores">
     <div id="result"></div>   <!-- data will be displayed here -->
	
	<script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.1.2/handlebars.min.js"></script>
	
	<!-- template -->
    <script type="text/x-handlebars-template" id="tableTemplate">
     <table cellspacing='12'>
      <tr><th>Name</th><th>Major</th><th>Midterm</th><th>Final</th></tr>
            {{#each rows}}
                 <tr>
                    <td>{{name}}</td><td>{{major}}</td><td>{{midterm}}</td><td>{{final}}</td>
                 </tr>
            {{/each}}
      </table>
    </script>
  
	<script>
		//CIT button
		document.addEventListener('DOMContentLoaded', function() {
			//CIT button
			document.querySelector('#btnCIT').onclick = function() {
				var request = new XMLHttpRequest();
				request.open('GET', 'cit5students.json');
				
				request.onload = function() {

					
					var x  = JSON.parse(request.responseText);
					var data = x.filter(function(bus){return data[i].major == "CIT";};
					
					
					if (request.status == 200) {
						   var source   = document.getElementById('text-template').innerHTML; 
						   var template = Handlebars.compile(source);                          
						   var html = template(data);   
					
						 document.querySelector('#result').innerHTML = contents;
					}
					else {
						document.querySelector('#result').innerHTML = "There was an error.";
					}
			  }
			  request.send(null);
		 };
		 //BUS Button
		 document.querySelector('#btnBUS').onclick = function() {      
				var request = new XMLHttpRequest();
				request.open('GET', 'cit5students.json');                 
	  
				request.onload = function() {                       
					
					var x  = JSON.parse(request.responseText);
					var data = x.filter(function(bus){return data[i].major == "BUS";};
					
					
					if (request.status == 200) {
						   var source   = document.getElementById('text-template').innerHTML;  // get template text
						   var template = Handlebars.compile(source);                          // compile the template
						   var html = template(data);   
					
						 document.querySelector('#result').innerHTML = contents;
					}
					else {
						document.querySelector('#result').innerHTML = "There was an error.";
					}
			  }
			  request.send(null);
		 };
	  });
	  </script>
	  </body>
	  </html>
